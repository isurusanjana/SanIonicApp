<!--
  Generated template for the AccidentReportAddPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header class="accident-header">

  <ion-navbar>
    <ion-title>New Accident Report234</ion-title>
  </ion-navbar>
  <div>
    <div align="center">
      <p class="description"><span>Available Reports</span>
        <ion-badge color="secondary" item-end>{{remainingFreeReportCount}}/{{totalFreeReportCount}}</ion-badge>
      </p>
      <!-- <p class="description"><span>Remaining Credit Reports</span>
        <ion-badge color="danger" item-end>{{remainingCreditReportCount}}/{{totalCreditReportCount}}</ion-badge>
      </p> -->
      <button  *ngIf="remainingFreeReportCount == 0" outline color="primary" block small style="font-weight:500;font-size:15px;padding: 5px 25px;width:100%;color: #ffffff; border: #DB4437 solid 1px;background-color: #DB4437;" on-click="getMoreReports()">
        Request for more reports
      </button>
    </div>
  </div>
  <ion-fab bottom right edge>
    <button (click)="presentMapModal()" ion-fab color="custom8">
      <ion-icon name="md-pin"></ion-icon>
    </button>
  </ion-fab>
</ion-header>


<ion-content padding>

  <form [formGroup]="accidentForm" (ngSubmit)="doSubmit()">
    <ion-list>
      <ion-list-header class="form-header">Accident Information</ion-list-header>
      <ion-item class="input-item">
        <ion-label stacked>Reported By</ion-label>
        <ion-input placeholder="" type="text" formControlName="reported_by"></ion-input>
      </ion-item>
      <ion-item class="input-item">
        <ion-label stacked>Date & Time <span class="required">*</span></ion-label>
        <ion-datetime placeholder="" displayFormat="DD MMM YYYY HH:mm"
                      formControlName="date_time" [(ngModel)]="date"></ion-datetime>
      </ion-item>
      <ion-item class="input-item">
        <ion-label stacked>Time of Accident/Incident <span class="required">*</span></ion-label>
        <ion-datetime placeholder="" displayFormat="HH:mm"
                      formControlName="time_of_accident" [(ngModel)]="time"></ion-datetime>
      </ion-item>
      <ion-item class="input-item">
        <ion-label stacked>Address <span class="required">*</span></ion-label>
        <ion-textarea #address placeholder="" formControlName="address"
                      [(ngModel)]="currentAddress"></ion-textarea>
      </ion-item>
      <ion-item class="input-item">
        <ion-label stacked>Type </ion-label>
        <ion-input placeholder="" type="text" formControlName="type"></ion-input>
      </ion-item>
      <ion-item class="input-item">
        <ion-label stacked>Weather </ion-label>
        <ion-input placeholder="" type="text" formControlName="whether"></ion-input>
      </ion-item>
      <ion-item class="input-item">
        <ion-label stacked>Coordinates - Latitude <span class="required">*</span></ion-label>
        <ion-input placeholder="" type="text" formControlName="latitude"
                   [(ngModel)]="lat" [readonly]="true"></ion-input>
      </ion-item>
      <ion-item class="input-item">
        <ion-label stacked>Coordinates - Longitude <span class="required">*</span></ion-label>
        <ion-input placeholder="" type="text" formControlName="longitude"
                   [(ngModel)]="lng" [readonly]="true"></ion-input>
      </ion-item>
      <ion-item class="input-item">
        <ion-label stacked>Persons Involved </ion-label>
        <ion-input placeholder="" type="text"
                   formControlName="involved_persons"></ion-input>
      </ion-item>
      <ion-item class="input-item">
        <ion-label stacked>Description </ion-label>
        <ion-textarea placeholder="" formControlName="description"></ion-textarea>
      </ion-item>
    </ion-list>

    <ion-list>
      <ion-list-header class="form-header">Person/Vehicle information</ion-list-header>
      <ion-item class="input-item">
        <ion-label stacked>Person/Driver's Name</ion-label>
        <ion-input placeholder="" type="text" formControlName="diver_name"></ion-input>
      </ion-item>
      <ion-item class="input-item">
        <ion-label stacked>Person/Driver's Address</ion-label>
        <ion-textarea placeholder="" formControlName="driver_address"></ion-textarea>
      </ion-item>
      <ion-item class="input-item">
        <ion-label stacked>Person/Driver's Phone Number</ion-label>
        <ion-input placeholder="" type="number" formControlName="driver_phone"></ion-input>
      </ion-item>
      <ion-item class="input-item">
        <ion-label stacked>Plant/Vehicle Make</ion-label>
        <ion-input placeholder="" type="text" formControlName="vehicle_make"></ion-input>
      </ion-item>
      <ion-item class="input-item">
        <ion-label stacked>Plant/Vehicle Colour</ion-label>
        <ion-input placeholder="" type="text" formControlName="vehicle_colour"></ion-input>
      </ion-item>
      <ion-item class="input-item">
        <ion-label stacked>Plant/Vehicle Model</ion-label>
        <ion-input placeholder="" type="text" formControlName="vehicle_model"></ion-input>
      </ion-item>
      <ion-item class="input-item">
        <ion-label stacked>Vehicle Registration</ion-label>
        <ion-input placeholder="" type="text" formControlName="vehicle_registration"></ion-input>
      </ion-item>
      <ion-item class="input-item">
        <ion-label stacked>Insurance Company</ion-label>
        <ion-input placeholder="" type="text" formControlName="insurance_company"></ion-input>
      </ion-item>
      <ion-item class="input-item">
        <ion-label stacked>Number of Passengers</ion-label>
        <ion-input placeholder="" type="number" formControlName="number_of_passenger"></ion-input>
      </ion-item>
    </ion-list>

    <ion-list>
      <ion-list-header class="form-header">Witness Information</ion-list-header>
      <ion-item class="input-item">
        <ion-label stacked>Name</ion-label>
        <ion-input placeholder="" type="text" formControlName="witness_name"></ion-input>
      </ion-item>
      <ion-item class="input-item">
        <ion-label stacked>Address</ion-label>
        <ion-textarea placeholder="" formControlName="witness_address"></ion-textarea>
      </ion-item>
      <ion-item class="input-item">
        <ion-label stacked>Phone Number</ion-label>
        <ion-input placeholder="" type="number" formControlName="witness_phone"></ion-input>
      </ion-item>
    </ion-list>

    <ion-list>
      <ion-list-header class="form-header">Injury Details</ion-list-header>
      <ion-item class="input-item">
        <ion-label stacked>Persons Involved</ion-label>
        <ion-input placeholder="" type="text" formControlName="injury_person_involved"></ion-input>
      </ion-item>
      <ion-item class="input-item">
        <ion-label stacked>Injuries</ion-label>
        <ion-textarea placeholder="" formControlName="injuries"></ion-textarea>
      </ion-item>
    </ion-list>

    <ion-list>
      <ion-list-header class="form-header">Upload Photos</ion-list-header>
    </ion-list>
    <div class="photos">
      <div class="photo-left">
        <ion-item class="input-item">
          <ion-label stacked>Description For Image 1</ion-label>
          <ion-input placeholder="" type="text" formControlName="description_image1"></ion-input>
        </ion-item>
        <ion-card (click)="doTakePhoto(1)" *ngIf="image1Base64==''">
          <img src="assets/imgs/camera-icon.png"/>
          <div class="card-title">Click Here</div>
          <div class="card-subtitle">to take a photo</div>
        </ion-card>
        <ion-card (click)="doRemovePhoto(1)" *ngIf="image1Base64!=''">
          <img [src]="image1Base64"/>
          <div class="card-title danger-text">Click Here</div>
          <div class="card-subtitle danger-text">to remove a photo</div>
        </ion-card>
      </div>
      <div class="photo-right">
        <ion-item class="input-item">
          <ion-label stacked>Description For Image 2</ion-label>
          <ion-input placeholder="" type="text" formControlName="description_image2"></ion-input>
        </ion-item>
        <ion-card (click)="doTakePhoto(2)" *ngIf="image2Base64==''">
          <img src="assets/imgs/camera-icon.png"/>
          <div class="card-title">Click Here</div>
          <div class="card-subtitle">to take a photo</div>
        </ion-card>
        <ion-card (click)="doRemovePhoto(2)" *ngIf="image2Base64!=''">
          <img [src]="image2Base64"/>
          <div class="card-title danger-text">Click Here</div>
          <div class="card-subtitle danger-text">to remove a photo</div>
        </ion-card>
      </div>
    </div>
    <div class="photos">
      <div class="photo-left">
        <ion-item class="input-item">
          <ion-label stacked>Description For Image 3</ion-label>
          <ion-input placeholder="" type="text" formControlName="description_image3"></ion-input>
        </ion-item>
        <ion-card (click)="doTakePhoto(3)" *ngIf="image3Base64==''">
          <img src="assets/imgs/camera-icon.png"/>
          <div class="card-title">Click Here</div>
          <div class="card-subtitle">to take a photo</div>
        </ion-card>
        <ion-card (click)="doRemovePhoto(3)" *ngIf="image3Base64!=''">
          <img [src]="image3Base64"/>
          <div class="card-title danger-text">Click Here</div>
          <div class="card-subtitle danger-text">to remove a photo</div>
        </ion-card>
      </div>
      <div class="photo-right">
        <ion-item class="input-item">
          <ion-label stacked>Description For Image 4</ion-label>
          <ion-input placeholder="" type="text" formControlName="description_image4"></ion-input>
        </ion-item>
        <ion-card (click)="doTakePhoto(4)" *ngIf="image4Base64==''">
          <img src="assets/imgs/camera-icon.png"/>
          <div class="card-title">Click Here</div>
          <div class="card-subtitle">to take a photo</div>
        </ion-card>
        <ion-card (click)="doRemovePhoto(4)" *ngIf="image4Base64!=''">
          <img [src]="image4Base64"/>
          <div class="card-title danger-text">Click Here</div>
          <div class="card-subtitle danger-text">to remove a photo</div>
        </ion-card>
      </div>
    </div>


    <button ion-button color="secondary" type="submit" block [disabled]="!accidentForm.valid">Submit</button>

  </form>

</ion-content>
